#N canvas 706 261 577 533 10;
#X obj 310 316 tabwrite~ \$0-waveform;
#X obj 238 222 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#N canvas 0 50 450 565 vArrayMap 0;
#X obj 162 112 list length;
#X msg 162 133 resize \$1;
#X obj 162 175 s \$0-pointer;
#X obj 99 70 inlet;
#X obj 99 91 t b b l b l;
#X obj 114 345 element float-array z;
#X obj 237 324 r \$0-pointer;
#X obj 114 387 get float y;
#X msg 129 303 0;
#X obj 150 324 + 1;
#X obj 114 324 f;
#X obj 114 282 until;
#X obj 155 217 r \$0-pointer;
#X obj 114 238 pointer;
#X obj 114 260 getsize float-array z;
#X obj 114 429 set float y;
#X obj 99 471 outlet;
#X obj 114 366 t p p;
#X obj 144 471 outlet;
#X obj 318 324 inlet;
#X obj 162 153 array define -k \$0-map2;
#A 0 199.056 193.687 188.136 182.422 176.559 170.563 164.451 158.24
151.949 145.592 139.188 132.756 126.312 119.876 113.463 107.093 100.783
94.55 88.4112 82.3838 76.485 70.73 65.1342 59.7159 54.4883 49.4648
44.6603 40.089 35.7612 31.6886 27.8857 24.3604 21.1214 18.1789 15.5436
13.2194 11.2118 9.5302 8.17616 7.15225 6.46252 6.11119 6.09523 6.41457
7.07212 8.06466 9.38708 11.0364 13.0107 15.3004 17.8992 20.8031 24.0021
27.4857 31.2454 35.2729 39.555 44.0787 48.8335 53.8052 58.9787 64.3403
69.877 75.5711 81.4069 87.3696 93.4422 99.6074 105.848 112.147 118.488
124.851 131.22 137.577 143.905 150.186 156.402 162.537 168.574 174.495
180.285 185.927 191.408 196.709 201.818 206.721 211.404 215.853 220.058
224.007 227.685 231.088 234.205 237.026 239.543 241.753 243.648 245.219
246.467 247.386 247.975 248.23 248.155 247.749 247.009 245.942 244.551
242.838 240.807 238.467 235.823 232.88 229.65 226.142 222.364 218.327
214.044 209.526 204.784 199.833 194.687 189.359 183.864 178.218 172.438
166.538 160.535 154.446 148.288 142.077 135.832 129.569 123.305 117.058
110.846 104.685 98.5922 92.5848 86.6786 80.8911 75.2376 69.7328 64.3931
59.2342 54.2681 49.508 44.9693 40.6633 36.6003 32.7921 29.2518 25.9855
23.0021 20.3137 17.9252 15.8411 14.0674 12.6127 11.4765 10.6615 10.1727
10.0105 10.1729 10.6601 11.4754 12.6107 14.0624 15.8292 17.9053 20.2828
22.9549 25.9183 29.1602 32.6717 36.4455 40.4708 44.7337 49.2224 53.9277
58.833 63.9249 69.1904 74.6148 80.182 85.8764 91.6844 97.5878 103.57
109.615 115.707 121.827 127.96 134.087 140.193 146.261 152.273 158.212
164.064 169.811 175.438 180.928 186.269 191.444 196.438 201.24 205.837
210.212 214.357 218.26 221.911 225.297 228.412 231.249 233.796 236.049
238.003 239.651 240.986 242.009 242.717 243.106 243.176 242.929 242.365
241.484 240.291 238.791 236.983 234.875 232.475 229.789 226.822 223.585
220.089 216.34 212.351 208.133 203.698 199.056 194.223 189.211 184.035
178.708 173.248 167.667 161.982 156.208 150.363 144.461 138.519 132.554
126.582 120.62 114.685 108.791 102.957;
#X obj 130 196 array set \$0-map2;
#X obj 99 450 array get \$0-map2;
#X connect 0 0 1 0;
#X connect 1 0 20 0;
#X connect 3 0 4 0;
#X connect 4 0 22 0;
#X connect 4 1 13 0;
#X connect 4 2 21 0;
#X connect 4 3 8 0;
#X connect 4 3 20 0;
#X connect 4 4 0 0;
#X connect 5 0 17 0;
#X connect 6 0 5 1;
#X connect 7 0 18 0;
#X connect 8 0 10 1;
#X connect 9 0 10 1;
#X connect 10 0 9 0;
#X connect 10 0 5 0;
#X connect 11 0 10 0;
#X connect 12 0 13 1;
#X connect 13 0 14 0;
#X connect 14 0 11 0;
#X connect 17 0 7 0;
#X connect 17 1 15 1;
#X connect 19 0 15 0;
#X connect 20 0 2 0;
#X connect 22 0 16 0;
#X restore 267 442 pd vArrayMap;
#X obj 238 245 loadbang;
#X obj 296 336 array get \$0-waveform;
#X obj 281 399 s \$0-waveform2;
#X obj 296 357 array set \$0-waveform2;
#X obj 267 463 array set \$0-waveform2;
#X obj 267 421 array get \$0-waveform2;
#N canvas 557 250 630 462 windows 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-waveform 256 float 3;
#A 0 -0.246296 -0.22782 -0.208808 -0.189312 -0.169388 -0.149097 -0.128498
-0.107644 -0.0865984 -0.0654216 -0.0441712 -0.0229068 -0.00168913 0.0194236
0.0403726 0.0611007 0.0815522 0.101671 0.121401 0.140692 0.159494 0.177749
0.195414 0.212446 0.228799 0.244426 0.259293 0.273366 0.2866 0.298968
0.310444 0.320998 0.330594 0.339224 0.346871 0.353509 0.359129 0.363727
0.367293 0.369813 0.371298 0.37175 0.371163 0.369545 0.366916 0.363288
0.358664 0.353077 0.346548 0.339091 0.330737 0.321518 0.311464 0.300595
0.288959 0.276594 0.263532 0.249815 0.235491 0.220602 0.205185 0.189294
0.172977 0.156277 -0.376659 -0.328457 -0.279366 -0.229527 -0.179077
-0.128152 -0.0768991 -0.0254581 0.0260298 0.0774211 0.128575 0.179352
0.229605 0.2792 0.328 0.375868 0.422669 0.468285 0.51259 0.555442 0.596744
0.636384 0.67424 0.710209 0.744199 0.776121 0.805859 0.833364 0.858562
0.881369 0.901718 0.919577 0.934897 0.9476 0.957687 0.965122 0.96988
0.971944 0.971333 0.96805 0.962069 0.953442 0.942197 0.92835 0.911934
0.893016 0.871643 0.847852 0.821738 0.793379 0.762843 0.730205 0.695578
0.659057 0.620722 0.580698 0.539097 0.496026 0.451603 0.405966 0.35924
0.311541 0.263014 0.213792 0.16401 0.113802 0.0633134 0.0126806 -0.0379553
-0.0884531 -0.138675 -0.188483 -0.237733 -0.286297 -0.334043 -0.380829
-0.426532 -0.471033 -0.514199 -0.555904 -0.59605 -0.63453 -0.671221
-0.706032 -0.738876 -0.769662 -0.798282 -0.824687 -0.848804 -0.870537
-0.889847 -0.906694 -0.921033 -0.932793 -0.941978 -0.948566 -0.952518
-0.953829 -0.952516 -0.948578 -0.941987 -0.932809 -0.921073 -0.906791
-0.890007 -0.870788 -0.849187 -0.82523 -0.799022 -0.770636 -0.740128
-0.707587 -0.673126 -0.636839 -0.598802 -0.559147 -0.517984 -0.475418
-0.431566 -0.386562 -0.340528 -0.293576 -0.245853 -0.197491 -0.148621
-0.0993782 -0.0499016 -0.000326585 0.0492098 0.0985702 0.14762 0.196223
0.244238 0.291541 0.338004 0.383486 0.427872 0.471045 0.51288 0.553255
0.592075 0.629234 0.664607 0.69811 0.729663 0.759174 0.786549 0.811736
0.834669 0.855259 0.87347 0.889264 0.902588 0.913383 0.92165 0.927375
0.930515 0.931082 0.929088 0.924532 0.917406 0.907764 0.895633 0.881023
0.863983 0.844579 0.822863 0.798876 0.772714 0.74445 0.714145 0.681893
0.647796 0.611944 0.57442 0.535344 0.494833 0.452987 0.409928 0.365783
0.320671 0.274709 0.228037 0.180781 0.13307 0.0850354 0.0368137 -0.0114624
-0.0596585 -0.107642 -0.155282 -0.202445;
#X coords 0 -256 256 256 256 100 1 0 0;
#X restore 64 39 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array \$0-waveform2 256 float 0;
#X coords 0 255 255 0 256 100 1 0 0;
#X restore 64 160 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array \$0-hann 512 float 1;
#A 0 0 3.76403e-05 0.000150591 0.000338793 0.000602275 0.000940949
0.00135478 0.00184369 0.00240764 0.00304651 0.00376022 0.00454867 0.00541174
0.0063493 0.00736117 0.00844723 0.00960734 0.0108413 0.0121489 0.01353
0.0149843 0.0165117 0.0181119 0.0197847 0.0215298 0.0233469 0.0252359
0.0271963 0.0292279 0.0313304 0.0335035 0.0357469 0.0380601 0.040443
0.042895 0.0454159 0.0480052 0.0506626 0.0533877 0.05618 0.0590392
0.0619648 0.0649563 0.0680134 0.0711355 0.0743222 0.077573 0.0808874
0.0842649 0.0877051 0.0912073 0.0947711 0.0983959 0.102081 0.105826
0.109631 0.113494 0.117416 0.121395 0.125431 0.129524 0.133672 0.137876
0.142134 0.146446 0.150811 0.155229 0.159699 0.16422 0.168792 0.173413
0.178084 0.182803 0.18757 0.192384 0.197244 0.20215 0.2071 0.212095
0.217133 0.222214 0.227337 0.2325 0.237704 0.242948 0.24823 0.25355
0.258907 0.264301 0.26973 0.275194 0.280691 0.286222 0.291785 0.297379
0.303003 0.308658 0.314341 0.320052 0.32579 0.331555 0.337344 0.343159
0.348997 0.354857 0.36074 0.366643 0.372567 0.37851 0.384471 0.390449
0.396444 0.402455 0.40848 0.414519 0.420571 0.426635 0.432709 0.438794
0.444889 0.450991 0.457101 0.463218 0.46934 0.475466 0.481596 0.487729
0.493864 0.5 0.506136 0.512271 0.518404 0.524534 0.53066 0.536782 0.542899
0.549009 0.555111 0.561205 0.56729 0.573365 0.579429 0.585481 0.59152
0.597545 0.603556 0.609551 0.615529 0.62149 0.627433 0.633357 0.63926
0.645143 0.651003 0.656841 0.662656 0.668445 0.67421 0.679948 0.685659
0.691342 0.696997 0.702621 0.708215 0.713778 0.719309 0.724806 0.73027
0.735699 0.741092 0.74645 0.75177 0.757052 0.762295 0.767499 0.772663
0.777786 0.782867 0.787905 0.7929 0.79785 0.802756 0.807616 0.812431
0.817197 0.821916 0.826587 0.831209 0.83578 0.840301 0.844771 0.849189
0.853554 0.857866 0.862124 0.866328 0.870476 0.874569 0.878605 0.882584
0.886506 0.890369 0.894174 0.897919 0.901605 0.905229 0.908793 0.912295
0.915736 0.919113 0.922428 0.925678 0.928865 0.931987 0.935044 0.938036
0.940961 0.94382 0.946613 0.949338 0.951995 0.954585 0.957106 0.959558
0.96194 0.964254 0.966497 0.96867 0.970773 0.972804 0.974765 0.976654
0.978471 0.980216 0.981889 0.983489 0.985016 0.98647 0.987852 0.989159
0.990393 0.991553 0.992639 0.993651 0.994589 0.995452 0.99624 0.996954
0.997593 0.998156 0.998645 0.999059 0.999398 0.999661 0.999849 0.999962
1 0.999962 0.999849 0.999661 0.999398 0.999059 0.998645 0.998156 0.997592
0.996953 0.996239 0.995451 0.994588 0.99365 0.992638 0.991552 0.990392
0.989158 0.987851 0.986469 0.985015 0.983488 0.981887 0.980215 0.978469
0.976652 0.974763 0.972803 0.970771 0.968669 0.966495 0.964252 0.961939
0.959556 0.957104 0.954583 0.951993 0.949336 0.946611 0.943818 0.940959
0.938034 0.935042 0.931985 0.928863 0.925676 0.922425 0.919111 0.915733
0.912293 0.908791 0.905227 0.901602 0.897917 0.894171 0.890367 0.886503
0.882582 0.878602 0.874566 0.870473 0.866325 0.862121 0.857863 0.853551
0.849186 0.844768 0.840298 0.835777 0.831205 0.826584 0.821913 0.817194
0.812427 0.807613 0.802753 0.797847 0.792896 0.787901 0.782863 0.777782
0.77266 0.767496 0.762292 0.757048 0.751766 0.746446 0.741089 0.735695
0.730266 0.724802 0.719305 0.713774 0.708211 0.702617 0.696993 0.691338
0.685655 0.679944 0.674206 0.668441 0.662652 0.656837 0.650999 0.645139
0.639256 0.633353 0.627429 0.621486 0.615525 0.609547 0.603552 0.597541
0.591516 0.585477 0.579425 0.573361 0.567286 0.561201 0.555107 0.549004
0.542894 0.536778 0.530656 0.52453 0.518399 0.512266 0.506131 0.499996
0.49386 0.487725 0.481592 0.475462 0.469335 0.463213 0.457097 0.450987
0.444884 0.43879 0.432705 0.42663 0.420566 0.414515 0.408476 0.40245
0.39644 0.390445 0.384466 0.378505 0.372563 0.366639 0.360736 0.354853
0.348993 0.343155 0.33734 0.331551 0.325786 0.320048 0.314337 0.308654
0.302999 0.297375 0.291781 0.286218 0.280687 0.27519 0.269726 0.264297
0.258904 0.253547 0.248226 0.242944 0.237701 0.232497 0.227333 0.222211
0.21713 0.212092 0.207097 0.202146 0.19724 0.19238 0.187566 0.182799
0.17808 0.17341 0.168788 0.164217 0.159696 0.155226 0.150808 0.146443
0.142131 0.137873 0.133669 0.129521 0.125428 0.121392 0.117413 0.113491
0.109628 0.105823 0.102078 0.0983929 0.0947681 0.0912043 0.0877021
0.084262 0.0808845 0.0775701 0.0743194 0.0711327 0.0680107 0.0649537
0.0619622 0.0590366 0.0561775 0.0533852 0.0506602 0.0480028 0.0454136
0.0428927 0.0404407 0.038058 0.0357447 0.0335014 0.0313284 0.0292259
0.0271944 0.025234 0.0233451 0.0215281 0.019783 0.0181103 0.0165102
0.0149829 0.0135286 0.0121476 0.01084 0.00960615 0.0084461 0.0073601
0.00634828 0.00541082 0.00454783 0.00375944 0.00304583 0.00240701 0.00184315
0.00135431 0.000940561 0.000601947 0.000338584 0.000150442 3.75807e-05
;
#X coords 0 1 511 0 200 120 1;
#X restore 388 290 graph;
#X msg 524 99 0;
#X obj 418 148 osc~;
#X obj 418 100 samplerate~;
#X obj 418 171 *~ -0.5;
#X obj 418 194 +~ 0.5;
#X obj 410 219 tabwrite~ \$0-hann;
#X obj 410 77 bng 15 250 50 0 empty empty empty 0 -6 0 8 -262144 -1
-1;
#X text 466 146 period 512;
#X text 408 52 recalculate Hann;
#X text 443 67 window table;
#X obj 418 124 / 512;
#X connect 3 0 4 1;
#X connect 4 0 6 0;
#X connect 5 0 13 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 9 0 5 0;
#X connect 9 0 3 0;
#X connect 9 0 8 0;
#X connect 13 0 4 0;
#X restore 112 317 pd windows;
#X obj 238 287 t b b b b b b b;
#X msg 281 378 normalize 256;
#X obj 348 442 expr $f1 / 2.1 + 128;
#X obj 238 266 metro 20;
#N canvas 649 392 532 285 output 0;
#X obj 338 160 t b;
#X obj 338 110 f;
#X obj 338 60 inlet;
#X text 344 29 mute;
#X obj 338 185 f;
#X msg 426 180 0;
#X msg 338 85 bang;
#X obj 338 135 moses 1;
#X obj 397 110 moses 1;
#X obj 83 148 dbtorms;
#X obj 397 85 r master-lvl;
#X obj 83 42 r master-lvl;
#X obj 338 210 s master-lvl;
#X obj 20 155 inlet~;
#X obj 199 41 inlet;
#X text 199 18 level;
#X obj 199 105 s master-lvl;
#X msg 96 65 set \$1;
#X obj 96 90 outlet;
#X msg 214 65 \; pd dsp 1;
#X obj 83 198 line~;
#X obj 20 207 *~;
#X obj 20 232 dac~;
#X obj 83 173 pack 0 50;
#X text 20 132 audio;
#X text 96 114 show level;
#X obj 426 155 t b;
#X obj 20 181 hip~ 1;
#X connect 0 0 4 0;
#X connect 1 0 7 0;
#X connect 2 0 6 0;
#X connect 4 0 12 0;
#X connect 5 0 12 0;
#X connect 6 0 1 0;
#X connect 7 0 0 0;
#X connect 7 1 26 0;
#X connect 8 1 4 1;
#X connect 9 0 23 0;
#X connect 10 0 1 1;
#X connect 10 0 8 0;
#X connect 11 0 9 0;
#X connect 11 0 17 0;
#X connect 13 0 27 0;
#X connect 14 0 16 0;
#X connect 14 0 19 0;
#X connect 17 0 18 0;
#X connect 20 0 21 1;
#X connect 21 0 22 0;
#X connect 21 0 22 1;
#X connect 23 0 20 0;
#X connect 26 0 5 0;
#X connect 27 0 21 0;
#X restore 417 282 pd output;
#X msg 480 254 MUTE;
#X obj 442 231 nbx 5 14 0 100 0 1 empty empty empty 0 -8 0 10 -262144
-1 -1 0 256;
#X obj 309 134 *~;
#X obj 309 68 osc~;
#X obj 325 112 osc~;
#X obj 309 42 nbx 5 14 -1e+37 1e+37 0 1 empty empty empty 0 -8 0 10
-4034 -1 -1 -8 256;
#X obj 325 91 nbx 5 14 -1e+37 1e+37 0 1 empty empty empty 0 -8 0 10
-4034 -1 -1 -369 256;
#X obj 55 399 ofelia define -k \$0-vectorscope;
#A __set if type(window) ~= "userdata" then \; window = ofWindow()
\; end \; \; local canvas = ofCanvas(this) \; local clock = ofClock(this
\, "setup") \; local shaderDir = canvas:getDir() .. "/data/" \; local
shader = ofShader() \; local image = ofImage() \; local array1 = ofArray("\$0-magnitude2")
\; local array2 = ofArray("\$0-waveform2") \; \; function ofelia.new()
\; ofWindow.addListener("setup" \, this) \; ofWindow.addListener("draw"
\, this) \; ofWindow.addListener("exit" \, this) \; window:setPosition(30
\, 100) \; window:setSize(800 \, 600) \; window:create() \; if ofWindow.exists
then \; clock:delay(0) \; end \; end \; \; function ofelia.free() \;
window:destroy() \; ofWindow.removeListener("setup" \, this) \; ofWindow.removeListener("draw"
\, this) \; ofWindow.removeListener("exit" \, this) \; end \; \; function
ofelia.setup() \; image:allocate(256 \, 2 \, OF_IMAGE_COLOR) \; ofSetWindowTitle("?")
\; ofBackground(0 \, 0 \, 0 \, 255) \; shader:load(shaderDir .. "a")
\; end \; \; function ofelia.bang() \; for i = 0 \, 255 do \; image:setColor(i
\, 0 \, ofColor(array1:getAt(i))) \; image:setColor(i \, 1 \, ofColor(array2:getAt(i)))
\; end \; image:update() \; end \; \; function ofelia.draw() \; shader:beginShader()
\; shader:setUniform1f("time" \, ofGetElapsedTimeMillis()) \; shader:setUniform2f("resolution"
\, 800 \, 600) \; shader:setUniformTexture("spectrum" \, image:getTexture()
\, 1) \; ofDrawRectangle(0 \, 0 \, 800 \, 600) \; shader:endShader()
\; end \; \; function ofelia.exit() \; image:clear() \; shader:unload()
\; end \; \;;
#X connect 1 0 13 0;
#X connect 2 0 7 0;
#X connect 2 1 12 0;
#X connect 3 0 13 0;
#X connect 4 0 6 0;
#X connect 8 0 2 0;
#X connect 10 0 22 0;
#X connect 10 2 8 0;
#X connect 10 3 11 0;
#X connect 10 4 4 0;
#X connect 10 5 0 0;
#X connect 11 0 5 0;
#X connect 12 0 2 1;
#X connect 13 0 10 0;
#X connect 14 0 16 0;
#X connect 15 0 14 2;
#X connect 16 0 14 1;
#X connect 17 0 0 0;
#X connect 17 0 14 0;
#X connect 18 0 17 0;
#X connect 19 0 17 1;
#X connect 20 0 18 0;
#X connect 21 0 19 0;
